<head>
  <title>Tidal Wave</title>

  <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
  <link href="bower_components/bootstrap-select/bootstrap-select.css" rel="stylesheet">
  <link href="bower_components/selectize/dist/css/selectize.bootstrap3.css" rel="stylesheet">
  <link href="css/footer.css" rel="stylesheet">
  <link href="css/innerIcons.css" rel="stylesheet">
  <link href="css/diff.css" rel="stylesheet">

  <style type="text/css">
    /* To indent navigation */
    .nav-list {
    padding-right: 15px;
    padding-left: 15px;
    margin-bottom: 0;
    }
  </style>

  <style type="text/css">
    /* ace editor */
    #editor { 
    height: 400px;
    }
  </style>

  <!-- set options before less.js script -->
  <script>
    less = {
    env: "development"
    };
  </script>
  <script src="bower_components/less/dist/less-1.7.0.js" type="text/javascript"></script>

  <script type="text/javascript" src="bower_components/jquery/dist/jquery.js">
  </script>
  <script type="text/javascript" src="bower_components/sifter/sifter.js">
  </script>
  <script type="text/javascript" src="bower_components/microplugin/src/microplugin.js">
  </script>
  <script type="text/javascript" src="bower_components/selectize/dist/js/selectize.js">
  </script>
  <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.js">
  </script>
  <script type="text/javascript" src="bower_components/handlebars/handlebars.js">
  </script>
  <script type="text/javascript" src="bower_components/underscore/underscore.js">
  </script>
  <script type="text/javascript" src="bower_components/marked/lib/marked.js">
  </script>
  <script type="text/javascript" src="bower_components/bootstrap-select/bootstrap-select.js">
  </script>
  <script type="text/javascript" src="bower_components/momentjs/moment.js">
  </script>

  <script type="text/javascript">
    window.fd = {logging: false};
  </script>
  <script type="text/javascript" src="filedrop/filedrop.js">
  </script>

  <script type="text/javascript" src="bower_components/google-diff-match-patch-js/diff_match_patch_uncompressed.js">
  </script>

  <script src="/ace/ace.js" type="text/javascript" charset="utf-8">
  </script>
</head>

<template name="layout">
<body>
  {{> yield}}
</body>
</template>

<template name="loginHandler">
  <div id="login-buttons">
    <div id="login-dropdown-list" class="accounts-dialog" style="top:20px; left: 20px; width: auto; padding: 20px 20px; position: static;">
      {{> _loginButtonsLoggedOutAllServices}}
    </div>
  </div>
</template>

<template name="page">
  {{#if loggedIn}}
  {{> GroupEdit }}
  {{else}}
  {{> loginHandler }}
  {{/if}}
</template>

<template name="GroupEdit">
  {{> navbar}}

  <div class="main-row">
    <div id="sidebar-placeholder" class="col-xs-4 col-lg-2">
      {{> Sidebar }}
    </div>

    {{#if pageMode "ViewOrEdit"}}
    {{> ViewOrEdit}}
    {{/if}}
  </div>

  <div id="footer">
    <p class="text-muted">Powered by <a href="https://github.com/MisterTea/TidalWave">TidalWave</a></p>
  </div>
</template>

<template name="ViewOrEdit">
  <div id="ancestry" class="col-xs-14 col-lg-10">
    <ol class="breadcrumb">
      {{#each ancestors}}
      <li><a href="#">{{name}}</a></li>
      {{/each}}
      <li class="active">{{title}}</li>
    </ol>
  </div>

  <div id="editor" class="col-xs-7 col-lg-5"></div>
  <div id="content" class="col-xs-7 col-lg-5">{{{contentHtml}}}</div>
</template>

<template name="Sidebar">
  <div class="well">
    <div class="input-group input-group-sm">
      <input type="text" class="form-control">
      <span class="input-group-addon" style="padding: 0px;">
        <button class="btn btn-default" style="margin: 0px; padding: 0px;">
          <span class="glyphicon glyphicon-pencil" style="font-size: 18px;"></span>
        </button>
      </span>
    </div>
    <br />

    <ul class="nav">
      {{#each children}}
      <li>
        {{> categoryPartial}}
      </li>
      <li class="nav-divider"></li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="navbar">
  <div
     class="navbar navbar-default navbar-fixed-top"
     role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-brand" href="#">{{projectName}}</a>
      </div>
      <div class="collapse navbar-collapse navbar-right">
        <ul class="nav navbar-nav">
          {{#if userName}}
          <li><a href="#">{{userName}}</a></li>
          {{else}}
          <li><a href="#">Log In</a></li>
          {{/if}}
        </ul>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          {{#if onPage}}
          {{#if editMode}}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Export <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Text</a></li>
              <li><a href="#">PDF</a></li>
              <li><a href="#">HTML</a></li>
            </ul>
          </li>
          <li><a href="#">Finish Editing</a></li>
          <li><a href="#">History</a></li>
          <li><a href="#">Settings</a></li>
          {{else}}
          <li><a href="#">Edit</a></li>
          {{/if}}
          {{/if}}
        </ul>
      </div>
    </div>
  </div>
</template>
